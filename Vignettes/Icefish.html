<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Icefish</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Icefish</h1>



<div id="icefish-assessment" class="section level2">
<h2>Icefish Assessment</h2>
<p>The Icefish assessment aims to determine the fishing mortality and hence a total allowable catch that yields a prescribed two year escapement relative to an unfished population.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(Grym)</a></code></pre></div>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<p>Define the reference date that sets the start of the season</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">SeasonDate &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;2015-12-01&quot;</span>)</a></code></pre></div>
<p>Define the survey date and the corresponding time increments, and the observed relative numbers and biomass. Note that GYM averages over the start and end of the survey increment, so to match we provide two survey increments.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">SurveyDate &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;2016-04-20&quot;</span>)</a>
<a class="sourceLine" id="cb3-2" title="2">surveyI &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(SurveyDate<span class="op">-</span>SeasonDate)<span class="op">+</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb3-3" title="3">surveyN &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">29.87</span>,<span class="fl">90.53</span>,<span class="fl">1177.61</span>,<span class="kw">rep</span>(<span class="dv">0</span>,<span class="dv">7</span>))</a>
<a class="sourceLine" id="cb3-4" title="4">surveyB &lt;-<span class="st"> </span><span class="fl">3900.8173</span></a></code></pre></div>
<p>Define the spawning date and the corresponding time increments</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">SpawnDate &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;2016-11-30&quot;</span>)</a>
<a class="sourceLine" id="cb4-2" title="2">spawnI &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(SpawnDate<span class="op">-</span>SeasonDate) <span class="op">+</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)</a></code></pre></div>
</div>
<div id="projection" class="section level2">
<h2>Projection</h2>
<p>The current strategy is to project forward two years for a range of potential fishing mortalities, and then subsequently determine the mortality that yields the target relative escapement by inverse interpolation.</p>
<p>The function <code>icefishPr</code> projects forward two years for a specified range of fishing mortalities. A projection is performed for the current year and scaled to the survey data to determine the initial abundance for the following year. If the catch limit for the year has been reached the projection is done assuming zero fishing mortality (as no further fishing can occur) but if some catch allocation remains after the survey period, it is assumed the remaining allocation will be caught between the end of the survey and the start of the following year. The initial abundances are then projected forward for two years for a range of fishing mortalities, and annual summaries collated.</p>
<p>The model assumes a von Bertalanffy relation between length and age, and a power law relation between weight and length. The user must supply that computes fishing selectivity as a function of age.</p>
<p>The arguments are</p>
<ul>
<li><code>F</code> - fishing mortalities to test</li>
<li><code>Catch</code> - remaining catch allocation after survey in survey year</li>
<li><code>surveyN</code> - relative numbers in each cohort from survey</li>
<li><code>surveyB</code> - biomass estimate from survey</li>
<li><code>surveyI</code> - increments (ie days of season) over which survey is taken</li>
<li><code>spawnI</code> - increments (ie days of season) over which spawning numbers and biomass are estimated</li>
<li><code>VB.t0</code>, <code>VB.K</code>, <code>VB.Linf</code> - parameters for von Bertalanffy length at age relation</li>
<li><code>WLa</code>, <code>WLb</code> - parameters for allometric weight at length relation</li>
<li><code>age.selectivity</code> - age selectivity function.</li>
<li><code>Fmax</code> - maximum allowable fishing mortality</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">icefishPr &lt;-<span class="st"> </span><span class="cf">function</span>(M,F,<span class="dt">Catch=</span><span class="dv">0</span>,surveyN,surveyB,surveyI,spawnI,</a>
<a class="sourceLine" id="cb5-2" title="2">                      <span class="dt">VB.t0=</span><span class="fl">0.06671238</span>,<span class="dt">VB.K=</span><span class="fl">0.36842178</span>,<span class="dt">VB.Linf=</span><span class="fl">489.73706791</span>,</a>
<a class="sourceLine" id="cb5-3" title="3">                      <span class="dt">WLa=</span><span class="fl">9.157E-10</span>,<span class="dt">WLb=</span><span class="fl">3.316</span>,</a>
<a class="sourceLine" id="cb5-4" title="4">                      <span class="dt">age.selectivity=</span><span class="kw">approxfun</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="fl">2.5</span>,<span class="dv">3</span>),<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>),<span class="dt">rule=</span><span class="dv">2</span>),</a>
<a class="sourceLine" id="cb5-5" title="5">                      <span class="dt">Fmax=</span><span class="fl">2.5</span>) {</a>
<a class="sourceLine" id="cb5-6" title="6">    </a>
<a class="sourceLine" id="cb5-7" title="7">  <span class="co">## Ensure 0 included in test fishing mortalities</span></a>
<a class="sourceLine" id="cb5-8" title="8">  F &lt;-<span class="st"> </span><span class="kw">sort</span>(<span class="kw">union</span>(<span class="dv">0</span>,F))</a>
<a class="sourceLine" id="cb5-9" title="9">  </a>
<a class="sourceLine" id="cb5-10" title="10">  <span class="co">## Two year projections of 10 age classes with a daily time step</span></a>
<a class="sourceLine" id="cb5-11" title="11">  n.yr &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb5-12" title="12">  n.inc &lt;-<span class="st"> </span><span class="dv">365</span></a>
<a class="sourceLine" id="cb5-13" title="13">  Ages &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb5-14" title="14">  Days &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dt">length=</span>n.inc<span class="op">+</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb5-15" title="15">  </a>
<a class="sourceLine" id="cb5-16" title="16">  <span class="co">## Matrices of ages, lengths and weights for each day and age class</span></a>
<a class="sourceLine" id="cb5-17" title="17">  as &lt;-<span class="st"> </span><span class="kw">outer</span>(Days,Ages,<span class="dt">FUN=</span><span class="st">&quot;+&quot;</span>)  </a>
<a class="sourceLine" id="cb5-18" title="18">  ls &lt;-<span class="st"> </span><span class="kw">vonBertalanffyAL</span>(as,<span class="dt">t0=</span>VB.t0,<span class="dt">K=</span>VB.K,<span class="dt">Linf=</span>VB.Linf)</a>
<a class="sourceLine" id="cb5-19" title="19">  ws &lt;-<span class="st"> </span><span class="kw">powerLW</span>(ls,<span class="dt">a=</span>WLa,<span class="dt">b=</span>WLb)</a>
<a class="sourceLine" id="cb5-20" title="20"></a>
<a class="sourceLine" id="cb5-21" title="21">  <span class="co">## Constant intra-annual natural mortality</span></a>
<a class="sourceLine" id="cb5-22" title="22">  ms &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span>,n.inc<span class="op">+</span><span class="dv">1</span>,<span class="kw">length</span>(Ages))</a>
<a class="sourceLine" id="cb5-23" title="23">  Ms &lt;-<span class="st"> </span><span class="kw">ctrapz</span>(ms,<span class="dv">1</span><span class="op">/</span>n.inc)</a>
<a class="sourceLine" id="cb5-24" title="24">  MMs &lt;-<span class="st"> </span>M<span class="op">*</span>Ms</a>
<a class="sourceLine" id="cb5-25" title="25">  </a>
<a class="sourceLine" id="cb5-26" title="26">  <span class="co">## Within year fishing mortality is determined by an age based selectivity </span></a>
<a class="sourceLine" id="cb5-27" title="27">  fs &lt;-<span class="st"> </span><span class="kw">array</span>(<span class="kw">age.selectivity</span>(as),<span class="kw">dim</span>(as))</a>
<a class="sourceLine" id="cb5-28" title="28">  Fs &lt;-<span class="st"> </span><span class="kw">ctrapz</span>(fs,<span class="dv">1</span><span class="op">/</span>n.inc)</a>
<a class="sourceLine" id="cb5-29" title="29">  </a>
<a class="sourceLine" id="cb5-30" title="30">  <span class="co">### Projection to end of year from survey data</span></a>
<a class="sourceLine" id="cb5-31" title="31">  <span class="cf">if</span>(Catch<span class="op">&gt;</span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb5-32" title="32">    <span class="co">## Adjust with-year fishing mortality for post-survey Catch</span></a>
<a class="sourceLine" id="cb5-33" title="33">    fs0 &lt;-<span class="st"> </span><span class="kw">rep.int</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="kw">max</span>(surveyI),n.inc<span class="op">+</span><span class="dv">1</span><span class="op">-</span><span class="kw">max</span>(surveyI)))</a>
<a class="sourceLine" id="cb5-34" title="34">    fs0 &lt;-<span class="st"> </span>fs0<span class="op">/</span><span class="kw">trapz</span>(fs0,<span class="dv">1</span><span class="op">/</span>n.inc)<span class="op">*</span>fs  </a>
<a class="sourceLine" id="cb5-35" title="35">    Fs0 &lt;-<span class="st"> </span><span class="kw">ctrapz</span>(fs0,<span class="dv">1</span><span class="op">/</span>n.inc)</a>
<a class="sourceLine" id="cb5-36" title="36">    pr0 &lt;-<span class="st"> </span><span class="kw">projectC</span>(ws,MMs,Fs0,fs0,Catch,surveyN,surveyI,surveyB,surveyI,<span class="dt">yield=</span><span class="dv">1</span>,<span class="dt">Fmax=</span>Fmax)</a>
<a class="sourceLine" id="cb5-37" title="37">    <span class="cf">if</span>(pr0<span class="op">$</span>F<span class="op">==</span>Fmax) <span class="kw">warning</span>(<span class="st">&quot;Target catch could not be recovered&quot;</span>)</a>
<a class="sourceLine" id="cb5-38" title="38">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb5-39" title="39">    pr0 &lt;-<span class="st"> </span><span class="kw">project</span>(ws,MMs,<span class="dv">0</span>,<span class="dv">0</span>,surveyN,surveyI,surveyB,surveyI,<span class="dt">yield=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb5-40" title="40">    pr0<span class="op">$</span>F &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb5-41" title="41">  }</a>
<a class="sourceLine" id="cb5-42" title="42">  SSB0 &lt;-<span class="st"> </span><span class="kw">meanStock</span>(pr0<span class="op">$</span>B,<span class="dv">1</span>,spawnI)</a>
<a class="sourceLine" id="cb5-43" title="43"></a>
<a class="sourceLine" id="cb5-44" title="44">   </a>
<a class="sourceLine" id="cb5-45" title="45">  <span class="co">## Annual cohort totals</span></a>
<a class="sourceLine" id="cb5-46" title="46">  d &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Year=</span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="dv">0</span><span class="op">:</span>n.yr,<span class="kw">length</span>(F))),<span class="dt">F=</span><span class="dv">0</span>,<span class="dt">Nf=</span><span class="dv">0</span>,<span class="dt">Bf=</span><span class="dv">0</span>,<span class="dt">Y=</span><span class="dv">0</span>,<span class="dt">SSN=</span><span class="dv">0</span>,<span class="dt">SSB=</span><span class="dv">0</span>,<span class="dt">Escapement=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb5-47" title="47">  k &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb5-48" title="48">  </a>
<a class="sourceLine" id="cb5-49" title="49">  <span class="co">## Project forward for prescribed fishing mortalities.</span></a>
<a class="sourceLine" id="cb5-50" title="50">  <span class="cf">for</span>(Fk <span class="cf">in</span> F) {</a>
<a class="sourceLine" id="cb5-51" title="51">    <span class="co">## Reset to survey year</span></a>
<a class="sourceLine" id="cb5-52" title="52">    pr &lt;-<span class="st"> </span>pr0</a>
<a class="sourceLine" id="cb5-53" title="53">    d[k &lt;-<span class="st"> </span>k<span class="op">+</span><span class="dv">1</span>,] &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Year=</span><span class="dv">0</span>,<span class="dt">F=</span>Fk,<span class="dt">Nf=</span><span class="kw">sum</span>(<span class="kw">final</span>(pr<span class="op">$</span>N)),<span class="dt">Bf=</span><span class="kw">sum</span>(<span class="kw">final</span>(pr<span class="op">$</span>B)),<span class="dt">Y=</span><span class="kw">sum</span>(pr<span class="op">$</span>Y),</a>
<a class="sourceLine" id="cb5-54" title="54">                               <span class="dt">SSN=</span><span class="kw">meanStock</span>(pr<span class="op">$</span>N,<span class="dv">1</span>,spawnI),<span class="dt">SSB=</span>SSB0,<span class="dt">Escapement=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb5-55" title="55">    <span class="cf">for</span>(yr <span class="cf">in</span> <span class="kw">seq_len</span>(n.yr)) {</a>
<a class="sourceLine" id="cb5-56" title="56">      <span class="co">## Project</span></a>
<a class="sourceLine" id="cb5-57" title="57">      N0 &lt;-<span class="st"> </span><span class="kw">advance</span>(pr<span class="op">$</span>N)</a>
<a class="sourceLine" id="cb5-58" title="58">      pr &lt;-<span class="st"> </span><span class="kw">project</span>(ws,MMs,Fk<span class="op">*</span>Fs,Fk<span class="op">*</span>fs,N0,<span class="dt">yield=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb5-59" title="59">      SSB &lt;-<span class="st"> </span><span class="kw">meanStock</span>(pr<span class="op">$</span>B,<span class="dv">1</span>,spawnI)</a>
<a class="sourceLine" id="cb5-60" title="60">      d[k &lt;-<span class="st"> </span>k<span class="op">+</span><span class="dv">1</span>,] &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Year=</span>yr,<span class="dt">F=</span>Fk,<span class="dt">Nf=</span><span class="kw">sum</span>(<span class="kw">final</span>(pr<span class="op">$</span>N)),<span class="dt">Bf=</span><span class="kw">sum</span>(<span class="kw">final</span>(pr<span class="op">$</span>B)),<span class="dt">Y=</span><span class="kw">sum</span>(pr<span class="op">$</span>Y),</a>
<a class="sourceLine" id="cb5-61" title="61">                                 <span class="dt">SSN=</span><span class="kw">meanStock</span>(pr<span class="op">$</span>N,<span class="dv">1</span>,spawnI),<span class="dt">SSB=</span>SSB,<span class="dt">Escapement=</span>SSB<span class="op">/</span>SSB0)</a>
<a class="sourceLine" id="cb5-62" title="62">    }</a>
<a class="sourceLine" id="cb5-63" title="63">  }</a>
<a class="sourceLine" id="cb5-64" title="64">  d</a>
<a class="sourceLine" id="cb5-65" title="65">}</a></code></pre></div>
<div id="no-remaining-allocation" class="section level3">
<h3>No Remaining Allocation</h3>
<p>Make projections for a range of fishing mortalities, assuming no catch allocation remains after the survey</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">d &lt;-<span class="st"> </span><span class="kw">icefishPr</span>(<span class="dt">M=</span><span class="fl">0.4</span>,<span class="dt">F=</span><span class="kw">seq</span>(<span class="fl">0.12</span>,<span class="fl">0.18</span>,<span class="fl">0.001</span>),<span class="dt">Catch=</span><span class="dv">0</span>,surveyN,surveyB,surveyI,spawnI)</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">head</span>(d)</a>
<a class="sourceLine" id="cb6-3" title="3">  Year    F        Nf       Bf        Y       SSN      SSB Escapement</a>
<a class="sourceLine" id="cb6-4" title="4"><span class="dv">1</span>    <span class="dv">0</span> <span class="fl">0.00</span> <span class="fl">13468.072</span> <span class="fl">4037.349</span>   <span class="fl">0.0000</span> <span class="fl">13475.456</span> <span class="fl">4037.397</span>  <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="dv">2</span>    <span class="dv">1</span> <span class="fl">0.00</span>  <span class="fl">9027.919</span> <span class="fl">3702.622</span>   <span class="fl">0.0000</span>  <span class="fl">9032.868</span> <span class="fl">3703.390</span>  <span class="fl">0.9172719</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="dv">3</span>    <span class="dv">2</span> <span class="fl">0.00</span>  <span class="fl">6051.595</span> <span class="fl">3038.019</span>   <span class="fl">0.0000</span>  <span class="fl">6054.913</span> <span class="fl">3039.006</span>  <span class="fl">0.7527144</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="dv">4</span>    <span class="dv">0</span> <span class="fl">0.12</span> <span class="fl">13468.072</span> <span class="fl">4037.349</span>   <span class="fl">0.0000</span> <span class="fl">13475.456</span> <span class="fl">4037.397</span>  <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="dv">5</span>    <span class="dv">1</span> <span class="fl">0.12</span>  <span class="fl">8024.398</span> <span class="fl">3287.274</span> <span class="fl">440.2945</span>  <span class="fl">8030.118</span> <span class="fl">3288.494</span>  <span class="fl">0.8145086</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="dv">6</span>    <span class="dv">2</span> <span class="fl">0.12</span>  <span class="fl">4770.670</span> <span class="fl">2393.025</span> <span class="fl">340.4050</span>  <span class="fl">4774.070</span> <span class="fl">2394.196</span>  <span class="fl">0.5930048</span></a></code></pre></div>
<p>Compute the escapement and calculate the F the gives a two year escapement of 0.75 relative to unfished</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">d2 &lt;-<span class="st"> </span>d[d<span class="op">$</span>Year<span class="op">==</span><span class="dv">2</span>,]</a>
<a class="sourceLine" id="cb7-2" title="2">d2<span class="op">$</span>RelEscape &lt;-<span class="st"> </span>d2<span class="op">$</span>Escapement<span class="op">/</span>d2<span class="op">$</span>Escapement[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb7-3" title="3">F75 &lt;-<span class="st"> </span><span class="kw">approx</span>(d2<span class="op">$</span>RelEscape[<span class="op">-</span><span class="dv">1</span>],d2<span class="op">$</span>F[<span class="op">-</span><span class="dv">1</span>],<span class="fl">0.75</span>)<span class="op">$</span>y</a>
<a class="sourceLine" id="cb7-4" title="4">opar &lt;-<span class="st"> </span><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">4</span>)<span class="op">+</span><span class="fl">0.1</span>)</a>
<a class="sourceLine" id="cb7-5" title="5"><span class="kw">plot</span>(F<span class="op">~</span>RelEscape,<span class="dt">data=</span>d2[<span class="op">-</span><span class="dv">1</span>,],<span class="dt">type=</span><span class="st">&quot;l&quot;</span>,<span class="dt">col=</span><span class="st">&quot;grey60&quot;</span>,</a>
<a class="sourceLine" id="cb7-6" title="6">     <span class="dt">xlab=</span><span class="st">&quot;Relative Escapement&quot;</span>,<span class="dt">ylab=</span><span class="st">&quot;Fishing Mortality&quot;</span>)</a>
<a class="sourceLine" id="cb7-7" title="7"><span class="kw">abline</span>(<span class="dt">v=</span><span class="fl">0.75</span>,<span class="dt">h=</span>F75,<span class="dt">col=</span><span class="st">&quot;dodgerblue&quot;</span>)</a>
<a class="sourceLine" id="cb7-8" title="8"><span class="kw">points</span>(F<span class="op">~</span>RelEscape,<span class="dt">data=</span>d2[<span class="op">-</span><span class="dv">1</span>,],<span class="dt">pch=</span><span class="dv">16</span>,<span class="dt">col=</span><span class="st">&quot;grey60&quot;</span>)</a>
<a class="sourceLine" id="cb7-9" title="9"><span class="kw">axis</span>(<span class="dv">3</span>,<span class="dt">at=</span><span class="fl">0.75</span>,<span class="dt">col=</span><span class="st">&quot;dodgerblue&quot;</span>)</a>
<a class="sourceLine" id="cb7-10" title="10"><span class="kw">axis</span>(<span class="dv">4</span>,<span class="dt">at=</span>F75,<span class="dt">labels=</span><span class="kw">round</span>(F75,<span class="dv">4</span>),<span class="dt">col=</span><span class="st">&quot;dodgerblue&quot;</span>,<span class="dt">las=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb7-11" title="11"><span class="kw">par</span>(opar)</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Reproject for the target F</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">d &lt;-<span class="st"> </span><span class="kw">icefishPr</span>(<span class="dt">M=</span><span class="fl">0.4</span>,<span class="dt">F=</span>F75,<span class="dt">Catch=</span><span class="dv">0</span>,surveyN,surveyB,surveyI,spawnI)</a>
<a class="sourceLine" id="cb8-2" title="2">d</a>
<a class="sourceLine" id="cb8-3" title="3">  Year         F        Nf       Bf        Y       SSN      SSB Escapement</a>
<a class="sourceLine" id="cb8-4" title="4"><span class="dv">1</span>    <span class="dv">0</span> <span class="fl">0.0000000</span> <span class="fl">13468.072</span> <span class="fl">4037.349</span>   <span class="fl">0.0000</span> <span class="fl">13475.456</span> <span class="fl">4037.397</span>  <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="dv">2</span>    <span class="dv">1</span> <span class="fl">0.0000000</span>  <span class="fl">9027.919</span> <span class="fl">3702.622</span>   <span class="fl">0.0000</span>  <span class="fl">9032.868</span> <span class="fl">3703.390</span>  <span class="fl">0.9172719</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="dv">3</span>    <span class="dv">2</span> <span class="fl">0.0000000</span>  <span class="fl">6051.595</span> <span class="fl">3038.019</span>   <span class="fl">0.0000</span>  <span class="fl">6054.913</span> <span class="fl">3039.006</span>  <span class="fl">0.7527144</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="dv">4</span>    <span class="dv">0</span> <span class="fl">0.1447637</span> <span class="fl">13468.072</span> <span class="fl">4037.349</span>   <span class="fl">0.0000</span> <span class="fl">13475.456</span> <span class="fl">4037.397</span>  <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="dv">5</span>    <span class="dv">1</span> <span class="fl">0.1447637</span>  <span class="fl">7831.812</span> <span class="fl">3207.579</span> <span class="fl">524.8733</span>  <span class="fl">7837.661</span> <span class="fl">3208.878</span>  <span class="fl">0.7947889</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="dv">6</span>    <span class="dv">2</span> <span class="fl">0.1447637</span>  <span class="fl">4542.285</span> <span class="fl">2278.062</span> <span class="fl">396.0491</span>  <span class="fl">4545.677</span> <span class="fl">2279.254</span>  <span class="fl">0.5645356</span></a></code></pre></div>
</div>
<div id="remaining-allocation" class="section level3">
<h3>Remaining Allocation</h3>
<p>If there is an allocation of 200 tonnes remaining after the survey</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">d &lt;-<span class="st"> </span><span class="kw">icefishPr</span>(<span class="dt">M=</span><span class="fl">0.4</span>,<span class="dt">F=</span><span class="kw">seq</span>(<span class="fl">0.12</span>,<span class="fl">0.18</span>,<span class="fl">0.001</span>),<span class="dt">Catch=</span><span class="dv">200</span>,surveyN,surveyB,surveyI,spawnI)</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="kw">head</span>(d)</a>
<a class="sourceLine" id="cb9-3" title="3">  Year    F        Nf       Bf        Y       SSN      SSB Escapement</a>
<a class="sourceLine" id="cb9-4" title="4"><span class="dv">1</span>    <span class="dv">0</span> <span class="fl">0.00</span> <span class="fl">12818.934</span> <span class="fl">3836.237</span> <span class="fl">200.0000</span> <span class="fl">12827.442</span> <span class="fl">3836.730</span>  <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="dv">2</span>    <span class="dv">1</span> <span class="fl">0.00</span>  <span class="fl">8592.788</span> <span class="fl">3520.003</span>   <span class="fl">0.0000</span>  <span class="fl">8597.499</span> <span class="fl">3520.731</span>  <span class="fl">0.9176385</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="dv">3</span>    <span class="dv">2</span> <span class="fl">0.00</span>  <span class="fl">5759.918</span> <span class="fl">2889.236</span>   <span class="fl">0.0000</span>  <span class="fl">5763.076</span> <span class="fl">2890.174</span>  <span class="fl">0.7532910</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="dv">4</span>    <span class="dv">0</span> <span class="fl">0.12</span> <span class="fl">12818.934</span> <span class="fl">3836.237</span> <span class="fl">200.0000</span> <span class="fl">12827.442</span> <span class="fl">3836.730</span>  <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="dv">5</span>    <span class="dv">1</span> <span class="fl">0.12</span>  <span class="fl">7638.472</span> <span class="fl">3125.305</span> <span class="fl">418.3415</span>  <span class="fl">7643.917</span> <span class="fl">3126.463</span>  <span class="fl">0.8148771</span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="dv">6</span>    <span class="dv">2</span> <span class="fl">0.12</span>  <span class="fl">4541.228</span> <span class="fl">2275.988</span> <span class="fl">323.6952</span>  <span class="fl">4544.466</span> <span class="fl">2277.101</span>  <span class="fl">0.5935004</span></a></code></pre></div>
<p>Compute the escapement and calculate the F the gives a two year escapement of 0.75 relative to unfished</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">d2 &lt;-<span class="st"> </span>d[d<span class="op">$</span>Year<span class="op">==</span><span class="dv">2</span>,]</a>
<a class="sourceLine" id="cb10-2" title="2">d2<span class="op">$</span>RelEscape &lt;-<span class="st"> </span>d2<span class="op">$</span>Escapement<span class="op">/</span>d2<span class="op">$</span>Escapement[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb10-3" title="3">F75 &lt;-<span class="st"> </span><span class="kw">approx</span>(d2<span class="op">$</span>RelEscape[<span class="op">-</span><span class="dv">1</span>],d2<span class="op">$</span>F[<span class="op">-</span><span class="dv">1</span>],<span class="fl">0.75</span>)<span class="op">$</span>y</a>
<a class="sourceLine" id="cb10-4" title="4">opar &lt;-<span class="st"> </span><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">5</span>)<span class="op">+</span><span class="fl">0.1</span>)</a>
<a class="sourceLine" id="cb10-5" title="5"><span class="kw">plot</span>(F<span class="op">~</span>RelEscape,<span class="dt">data=</span>d2[<span class="op">-</span><span class="dv">1</span>,],<span class="dt">type=</span><span class="st">&quot;l&quot;</span>,<span class="dt">col=</span><span class="st">&quot;grey60&quot;</span>,</a>
<a class="sourceLine" id="cb10-6" title="6">     <span class="dt">xlab=</span><span class="st">&quot;Relative Escapement&quot;</span>,<span class="dt">ylab=</span><span class="st">&quot;Fishing Mortality&quot;</span>)</a>
<a class="sourceLine" id="cb10-7" title="7"><span class="kw">abline</span>(<span class="dt">v=</span><span class="fl">0.75</span>,<span class="dt">h=</span>F75,<span class="dt">col=</span><span class="st">&quot;dodgerblue&quot;</span>)</a>
<a class="sourceLine" id="cb10-8" title="8"><span class="kw">points</span>(F<span class="op">~</span>RelEscape,<span class="dt">data=</span>d2[<span class="op">-</span><span class="dv">1</span>,],<span class="dt">pch=</span><span class="dv">16</span>,<span class="dt">col=</span><span class="st">&quot;grey60&quot;</span>)</a>
<a class="sourceLine" id="cb10-9" title="9"><span class="kw">axis</span>(<span class="dv">3</span>,<span class="dt">at=</span><span class="fl">0.75</span>,<span class="dt">col=</span><span class="st">&quot;dodgerblue&quot;</span>)</a>
<a class="sourceLine" id="cb10-10" title="10"><span class="kw">axis</span>(<span class="dv">4</span>,<span class="dt">at=</span>F75,<span class="dt">labels=</span><span class="kw">round</span>(F75,<span class="dv">5</span>),<span class="dt">col=</span><span class="st">&quot;dodgerblue&quot;</span>,<span class="dt">las=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb10-11" title="11"><span class="kw">par</span>(opar)</a></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Reproject for the target F</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">d &lt;-<span class="st"> </span><span class="kw">icefishPr</span>(<span class="dt">M=</span><span class="fl">0.4</span>,<span class="dt">F=</span>F75,<span class="dt">Catch=</span><span class="dv">200</span>,surveyN,surveyB,surveyI,spawnI)</a>
<a class="sourceLine" id="cb11-2" title="2">d</a>
<a class="sourceLine" id="cb11-3" title="3">  Year         F        Nf       Bf        Y       SSN      SSB Escapement</a>
<a class="sourceLine" id="cb11-4" title="4"><span class="dv">1</span>    <span class="dv">0</span> <span class="fl">0.0000000</span> <span class="fl">12818.934</span> <span class="fl">3836.237</span> <span class="fl">200.0000</span> <span class="fl">12827.442</span> <span class="fl">3836.730</span>  <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="dv">2</span>    <span class="dv">1</span> <span class="fl">0.0000000</span>  <span class="fl">8592.788</span> <span class="fl">3520.003</span>   <span class="fl">0.0000</span>  <span class="fl">8597.499</span> <span class="fl">3520.731</span>  <span class="fl">0.9176385</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="dv">3</span>    <span class="dv">2</span> <span class="fl">0.0000000</span>  <span class="fl">5759.918</span> <span class="fl">2889.236</span>   <span class="fl">0.0000</span>  <span class="fl">5763.076</span> <span class="fl">2890.174</span>  <span class="fl">0.7532910</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="dv">4</span>    <span class="dv">0</span> <span class="fl">0.1448063</span> <span class="fl">12818.934</span> <span class="fl">3836.237</span> <span class="fl">200.0000</span> <span class="fl">12827.442</span> <span class="fl">3836.730</span>  <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="dv">5</span>    <span class="dv">1</span> <span class="fl">0.1448063</span>  <span class="fl">7455.014</span> <span class="fl">3049.443</span> <span class="fl">498.8401</span>  <span class="fl">7460.582</span> <span class="fl">3050.676</span>  <span class="fl">0.7951241</span></a>
<a class="sourceLine" id="cb11-9" title="9"><span class="dv">6</span>    <span class="dv">2</span> <span class="fl">0.1448063</span>  <span class="fl">4323.566</span> <span class="fl">2166.497</span> <span class="fl">376.6999</span>  <span class="fl">4326.795</span> <span class="fl">2167.630</span>  <span class="fl">0.5649681</span></a></code></pre></div>
</div>
</div>
<div id="relative-escapement-targeting" class="section level2">
<h2>Relative Escapement Targeting</h2>
<p>The above process is easily extendend to automate the search for the fishing mortality that yields a target relative escapement.</p>
<p>The function <code>icefishRE</code> uses <code>uniroot</code> to determine the fishing mortality that produces a desired relative escapement and then projects forward for both zero fishing and the target fishing mortality. The arguments are</p>
<ul>
<li><code>target</code> - target relative escapement</li>
<li><code>M</code> - natural mortality</li>
<li><code>F</code> - range of fishing mortalities to search</li>
<li><code>Catch</code> - remaining catch allocation after survey in survey year</li>
<li><code>surveyN</code> - relative numbers in each cohort from survey</li>
<li><code>surveyB</code> - biomass estimate from survey</li>
<li><code>surveyI</code> - increments (ie days of season) over which survey is taken</li>
<li><code>spawnI</code> - increments (ie days of season) over which spawning numbers and biomass are estimated</li>
<li><code>VB.t0</code>, <code>VB.K</code>, <code>VB.Linf</code> - parameters for von Bertalanffy length at age relation</li>
<li><code>WLa</code>, <code>WLb</code> - parameters for allometric weight at length relation</li>
<li><code>age.selectivity</code> - age selectivity function.</li>
<li><code>Fmax</code> - maximum allowable fishing mortality</li>
<li><code>tol</code> - error tolerance for <code>uniroot</code></li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">icefishRE &lt;-<span class="st"> </span><span class="cf">function</span>(target,M,F,</a>
<a class="sourceLine" id="cb12-2" title="2">                      <span class="dt">Catch=</span><span class="dv">0</span>,surveyN,surveyB,surveyI,spawnI,</a>
<a class="sourceLine" id="cb12-3" title="3">                      <span class="dt">VB.t0=</span><span class="fl">0.06671238</span>,<span class="dt">VB.K=</span><span class="fl">0.36842178</span>,<span class="dt">VB.Linf=</span><span class="fl">489.73706791</span>,</a>
<a class="sourceLine" id="cb12-4" title="4">                      <span class="dt">WLa=</span><span class="fl">9.157E-10</span>,<span class="dt">WLb=</span><span class="fl">3.316</span>,</a>
<a class="sourceLine" id="cb12-5" title="5">                      <span class="dt">age.selectivity=</span><span class="kw">approxfun</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="fl">2.5</span>,<span class="dv">3</span>),<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>),<span class="dt">rule=</span><span class="dv">2</span>),</a>
<a class="sourceLine" id="cb12-6" title="6">                      <span class="dt">Fmax=</span><span class="fl">2.5</span>,<span class="dt">tol=</span><span class="fl">1.0E-6</span>) {</a>
<a class="sourceLine" id="cb12-7" title="7"></a>
<a class="sourceLine" id="cb12-8" title="8">  <span class="co">## Extract summary data from a projection</span></a>
<a class="sourceLine" id="cb12-9" title="9">  annualSummary &lt;-<span class="st"> </span><span class="cf">function</span>(yr,F,pr) {</a>
<a class="sourceLine" id="cb12-10" title="10">  }</a>
<a class="sourceLine" id="cb12-11" title="11"></a>
<a class="sourceLine" id="cb12-12" title="12">  <span class="co">## Ensure 0 included in test fishing mortalities</span></a>
<a class="sourceLine" id="cb12-13" title="13">  F &lt;-<span class="st"> </span><span class="kw">sort</span>(<span class="kw">union</span>(<span class="dv">0</span>,F))</a>
<a class="sourceLine" id="cb12-14" title="14">  </a>
<a class="sourceLine" id="cb12-15" title="15">  <span class="co">## Two year projections of 10 age classes with a daily time step</span></a>
<a class="sourceLine" id="cb12-16" title="16">  n.yr &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb12-17" title="17">  n.inc &lt;-<span class="st"> </span><span class="dv">365</span></a>
<a class="sourceLine" id="cb12-18" title="18">  Ages &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb12-19" title="19">  Days &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dt">length=</span>n.inc<span class="op">+</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb12-20" title="20">  </a>
<a class="sourceLine" id="cb12-21" title="21">  <span class="co">## Matrices of ages, lengths and weights for each day and age class</span></a>
<a class="sourceLine" id="cb12-22" title="22">  as &lt;-<span class="st"> </span><span class="kw">outer</span>(Days,Ages,<span class="dt">FUN=</span><span class="st">&quot;+&quot;</span>)  </a>
<a class="sourceLine" id="cb12-23" title="23">  ls &lt;-<span class="st"> </span><span class="kw">vonBertalanffyAL</span>(as,<span class="dt">t0=</span>VB.t0,<span class="dt">K=</span>VB.K,<span class="dt">Linf=</span>VB.Linf)</a>
<a class="sourceLine" id="cb12-24" title="24">  ws &lt;-<span class="st"> </span><span class="kw">powerLW</span>(ls,<span class="dt">a=</span>WLa,<span class="dt">b=</span>WLb)</a>
<a class="sourceLine" id="cb12-25" title="25"></a>
<a class="sourceLine" id="cb12-26" title="26">  <span class="co">## Constant intra-annual natural mortality</span></a>
<a class="sourceLine" id="cb12-27" title="27">  ms &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span>,n.inc<span class="op">+</span><span class="dv">1</span>,<span class="kw">length</span>(Ages))</a>
<a class="sourceLine" id="cb12-28" title="28">  Ms &lt;-<span class="st"> </span><span class="kw">ctrapz</span>(ms,<span class="dv">1</span><span class="op">/</span>n.inc)</a>
<a class="sourceLine" id="cb12-29" title="29">  MMs &lt;-<span class="st"> </span>M<span class="op">*</span>Ms</a>
<a class="sourceLine" id="cb12-30" title="30">  </a>
<a class="sourceLine" id="cb12-31" title="31">  <span class="co">## Within year fishing mortality is determined by an age based selectivity </span></a>
<a class="sourceLine" id="cb12-32" title="32">  fs &lt;-<span class="st"> </span><span class="kw">array</span>(<span class="kw">age.selectivity</span>(as),<span class="kw">dim</span>(as))</a>
<a class="sourceLine" id="cb12-33" title="33">  Fs &lt;-<span class="st"> </span><span class="kw">ctrapz</span>(fs,<span class="dv">1</span><span class="op">/</span>n.inc)</a>
<a class="sourceLine" id="cb12-34" title="34">  </a>
<a class="sourceLine" id="cb12-35" title="35">  <span class="co">### Projection to end of year from survey data</span></a>
<a class="sourceLine" id="cb12-36" title="36">  <span class="cf">if</span>(Catch<span class="op">&gt;</span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb12-37" title="37">    <span class="co">## Adjust with-year fishing mortality for post-survey Catch</span></a>
<a class="sourceLine" id="cb12-38" title="38">    fs0 &lt;-<span class="st"> </span><span class="kw">rep.int</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="kw">max</span>(surveyI),n.inc<span class="op">+</span><span class="dv">1</span><span class="op">-</span><span class="kw">max</span>(surveyI)))</a>
<a class="sourceLine" id="cb12-39" title="39">    fs0 &lt;-<span class="st"> </span>fs0<span class="op">/</span><span class="kw">trapz</span>(fs0,<span class="dv">1</span><span class="op">/</span>n.inc)<span class="op">*</span>fs  </a>
<a class="sourceLine" id="cb12-40" title="40">    Fs0 &lt;-<span class="st"> </span><span class="kw">ctrapz</span>(fs0,<span class="dv">1</span><span class="op">/</span>n.inc)</a>
<a class="sourceLine" id="cb12-41" title="41">    pr0 &lt;-<span class="st"> </span><span class="kw">projectC</span>(ws,MMs,Fs0,fs0,Catch,surveyN,surveyI,surveyB,surveyI,<span class="dt">yield=</span><span class="dv">1</span>,<span class="dt">Fmax=</span>Fmax)</a>
<a class="sourceLine" id="cb12-42" title="42">    <span class="cf">if</span>(pr0<span class="op">$</span>F<span class="op">==</span>Fmax) <span class="kw">warning</span>(<span class="st">&quot;Target catch could not be recovered&quot;</span>)</a>
<a class="sourceLine" id="cb12-43" title="43">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb12-44" title="44">    pr0 &lt;-<span class="st"> </span><span class="kw">project</span>(ws,MMs,<span class="dv">0</span>,<span class="dv">0</span>,surveyN,surveyI,surveyB,surveyI,<span class="dt">yield=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb12-45" title="45">    pr0<span class="op">$</span>F &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb12-46" title="46">  }</a>
<a class="sourceLine" id="cb12-47" title="47">  <span class="co">## Numbers at end of survey year - no recruitment</span></a>
<a class="sourceLine" id="cb12-48" title="48">  N0Survey &lt;-<span class="st"> </span><span class="kw">advance</span>(pr0<span class="op">$</span>N)</a>
<a class="sourceLine" id="cb12-49" title="49">  SSB0 &lt;-<span class="st"> </span><span class="kw">meanStock</span>(pr0<span class="op">$</span>B,<span class="dv">1</span>,spawnI)</a>
<a class="sourceLine" id="cb12-50" title="50">  </a>
<a class="sourceLine" id="cb12-51" title="51">  <span class="co">## Project ahead and return final SSB </span></a>
<a class="sourceLine" id="cb12-52" title="52">  ProjectSSB &lt;-<span class="st"> </span><span class="cf">function</span>(F,<span class="dt">target=</span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb12-53" title="53">    <span class="co">## Project and compute SSB for final year</span></a>
<a class="sourceLine" id="cb12-54" title="54">    N0 &lt;-<span class="st"> </span>N0Survey</a>
<a class="sourceLine" id="cb12-55" title="55">    <span class="cf">for</span>(yr <span class="cf">in</span> <span class="kw">seq_len</span>(n.yr)) {</a>
<a class="sourceLine" id="cb12-56" title="56">      pr &lt;-<span class="st"> </span><span class="kw">project</span>(ws,MMs,F<span class="op">*</span>Fs,F<span class="op">*</span>fs,N0,<span class="dt">yield=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb12-57" title="57">      N0 &lt;-<span class="st"> </span><span class="kw">advance</span>(pr<span class="op">$</span>N)</a>
<a class="sourceLine" id="cb12-58" title="58">    }</a>
<a class="sourceLine" id="cb12-59" title="59">    SSB &lt;-<span class="st"> </span><span class="kw">meanStock</span>(pr<span class="op">$</span>B,<span class="dv">1</span>,spawnI)</a>
<a class="sourceLine" id="cb12-60" title="60">    SSB<span class="op">-</span>target</a>
<a class="sourceLine" id="cb12-61" title="61">  }</a>
<a class="sourceLine" id="cb12-62" title="62">  </a>
<a class="sourceLine" id="cb12-63" title="63">  SSB1 &lt;-<span class="st"> </span><span class="kw">ProjectSSB</span>(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb12-64" title="64">  r &lt;-<span class="st"> </span><span class="kw">uniroot</span>(ProjectSSB,F,<span class="dt">target=</span>target<span class="op">*</span>SSB1)</a>
<a class="sourceLine" id="cb12-65" title="65">  F &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>,r<span class="op">$</span>root)</a>
<a class="sourceLine" id="cb12-66" title="66">  </a>
<a class="sourceLine" id="cb12-67" title="67">  <span class="co">## Annual cohort totals</span></a>
<a class="sourceLine" id="cb12-68" title="68">  d &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Year=</span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="dv">0</span><span class="op">:</span>n.yr,<span class="kw">length</span>(F))),<span class="dt">F=</span><span class="dv">0</span>,<span class="dt">Nf=</span><span class="dv">0</span>,<span class="dt">Bf=</span><span class="dv">0</span>,<span class="dt">Y=</span><span class="dv">0</span>,<span class="dt">SSN=</span><span class="dv">0</span>,<span class="dt">SSB=</span><span class="dv">0</span>,<span class="dt">Escapement=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb12-69" title="69">  k &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb12-70" title="70">  </a>
<a class="sourceLine" id="cb12-71" title="71">  <span class="co">## Project forward for prescribed fishing mortalities.</span></a>
<a class="sourceLine" id="cb12-72" title="72">  <span class="cf">for</span>(Fk <span class="cf">in</span> F) {</a>
<a class="sourceLine" id="cb12-73" title="73">    <span class="co">## Reset to survey year</span></a>
<a class="sourceLine" id="cb12-74" title="74">    pr &lt;-<span class="st"> </span>pr0</a>
<a class="sourceLine" id="cb12-75" title="75">    d[k &lt;-<span class="st"> </span>k<span class="op">+</span><span class="dv">1</span>,] &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Year=</span><span class="dv">0</span>,<span class="dt">F=</span>pr<span class="op">$</span>F,<span class="dt">Nf=</span><span class="kw">sum</span>(<span class="kw">final</span>(pr<span class="op">$</span>N)),<span class="dt">Bf=</span><span class="kw">sum</span>(<span class="kw">final</span>(pr<span class="op">$</span>B)),<span class="dt">Y=</span><span class="kw">sum</span>(pr<span class="op">$</span>Y),</a>
<a class="sourceLine" id="cb12-76" title="76">                               <span class="dt">SSN=</span><span class="kw">meanStock</span>(pr<span class="op">$</span>N,<span class="dv">1</span>,spawnI),<span class="dt">SSB=</span>SSB0,<span class="dt">Escapement=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb12-77" title="77">    <span class="cf">for</span>(yr <span class="cf">in</span> <span class="kw">seq_len</span>(n.yr)) {</a>
<a class="sourceLine" id="cb12-78" title="78">      <span class="co">## Project</span></a>
<a class="sourceLine" id="cb12-79" title="79">      N0 &lt;-<span class="st"> </span><span class="kw">advance</span>(pr<span class="op">$</span>N)</a>
<a class="sourceLine" id="cb12-80" title="80">      pr &lt;-<span class="st"> </span><span class="kw">project</span>(ws,MMs,Fk<span class="op">*</span>Fs,Fk<span class="op">*</span>fs,N0,<span class="dt">yield=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb12-81" title="81">      SSB &lt;-<span class="st"> </span><span class="kw">meanStock</span>(pr<span class="op">$</span>B,<span class="dv">1</span>,spawnI)</a>
<a class="sourceLine" id="cb12-82" title="82">      d[k &lt;-<span class="st"> </span>k<span class="op">+</span><span class="dv">1</span>,] &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Year=</span>yr,<span class="dt">F=</span>Fk,<span class="dt">Nf=</span><span class="kw">sum</span>(<span class="kw">final</span>(pr<span class="op">$</span>N)),<span class="dt">Bf=</span><span class="kw">sum</span>(<span class="kw">final</span>(pr<span class="op">$</span>B)),<span class="dt">Y=</span><span class="kw">sum</span>(pr<span class="op">$</span>Y),</a>
<a class="sourceLine" id="cb12-83" title="83">                                 <span class="dt">SSN=</span><span class="kw">meanStock</span>(pr<span class="op">$</span>N,<span class="dv">1</span>,spawnI),<span class="dt">SSB=</span>SSB,<span class="dt">Escapement=</span>SSB<span class="op">/</span>SSB0)</a>
<a class="sourceLine" id="cb12-84" title="84">    }</a>
<a class="sourceLine" id="cb12-85" title="85">  }</a>
<a class="sourceLine" id="cb12-86" title="86">  d</a>
<a class="sourceLine" id="cb12-87" title="87">}</a></code></pre></div>
<div id="no-remaining-allocation-1" class="section level3">
<h3>No Remaining Allocation</h3>
<p>Estimate the fishing mortality that gives 75% escapement after two years relative to unfished, assuming no catch allocation remains after the survey</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">d &lt;-<span class="st"> </span><span class="kw">icefishRE</span>(<span class="dt">target=</span><span class="fl">0.75</span>,<span class="dt">M=</span><span class="fl">0.4</span>,<span class="dt">F=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="fl">0.5</span>),<span class="dt">Catch=</span><span class="dv">0</span>,surveyN,surveyB,surveyI,spawnI)</a>
<a class="sourceLine" id="cb13-2" title="2">d<span class="op">$</span>RelEscapement &lt;-<span class="st"> </span>d<span class="op">$</span>SSB<span class="op">/</span>d<span class="op">$</span>SSB[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb13-3" title="3">d</a>
<a class="sourceLine" id="cb13-4" title="4">  Year        F        Nf       Bf        Y       SSN      SSB Escapement</a>
<a class="sourceLine" id="cb13-5" title="5"><span class="dv">1</span>    <span class="dv">0</span> <span class="fl">0.000000</span> <span class="fl">13468.072</span> <span class="fl">4037.349</span>   <span class="fl">0.0000</span> <span class="fl">13475.456</span> <span class="fl">4037.397</span>  <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="dv">2</span>    <span class="dv">1</span> <span class="fl">0.000000</span>  <span class="fl">9027.919</span> <span class="fl">3702.622</span>   <span class="fl">0.0000</span>  <span class="fl">9032.868</span> <span class="fl">3703.390</span>  <span class="fl">0.9172719</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="dv">3</span>    <span class="dv">2</span> <span class="fl">0.000000</span>  <span class="fl">6051.595</span> <span class="fl">3038.019</span>   <span class="fl">0.0000</span>  <span class="fl">6054.913</span> <span class="fl">3039.006</span>  <span class="fl">0.7527144</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="dv">4</span>    <span class="dv">0</span> <span class="fl">0.000000</span> <span class="fl">13468.072</span> <span class="fl">4037.349</span>   <span class="fl">0.0000</span> <span class="fl">13475.456</span> <span class="fl">4037.397</span>  <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="dv">5</span>    <span class="dv">1</span> <span class="fl">0.144764</span>  <span class="fl">7831.809</span> <span class="fl">3207.577</span> <span class="fl">524.8745</span>  <span class="fl">7837.658</span> <span class="fl">3208.877</span>  <span class="fl">0.7947887</span></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="dv">6</span>    <span class="dv">2</span> <span class="fl">0.144764</span>  <span class="fl">4542.282</span> <span class="fl">2278.061</span> <span class="fl">396.0499</span>  <span class="fl">4545.674</span> <span class="fl">2279.252</span>  <span class="fl">0.5645352</span></a>
<a class="sourceLine" id="cb13-11" title="11">  RelEscapement</a>
<a class="sourceLine" id="cb13-12" title="12"><span class="dv">1</span>     <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb13-13" title="13"><span class="dv">2</span>     <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb13-14" title="14"><span class="dv">3</span>     <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb13-15" title="15"><span class="dv">4</span>     <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb13-16" title="16"><span class="dv">5</span>     <span class="fl">0.8664701</span></a>
<a class="sourceLine" id="cb13-17" title="17"><span class="dv">6</span>     <span class="fl">0.7499992</span></a></code></pre></div>
</div>
<div id="remaining-allocation-1" class="section level3">
<h3>Remaining Allocation</h3>
<p>If there is an allocation of 200 tonnes remaining after the survey</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">d &lt;-<span class="st"> </span><span class="kw">icefishRE</span>(<span class="dt">target=</span><span class="fl">0.75</span>,<span class="dt">M=</span><span class="fl">0.4</span>,<span class="dt">F=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="fl">0.5</span>),<span class="dt">Catch=</span><span class="dv">200</span>,surveyN,surveyB,surveyI,spawnI)</a>
<a class="sourceLine" id="cb14-2" title="2">d<span class="op">$</span>RelEscapement &lt;-<span class="st"> </span>d<span class="op">$</span>SSB<span class="op">/</span>d<span class="op">$</span>SSB[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb14-3" title="3">d</a>
<a class="sourceLine" id="cb14-4" title="4">  Year          F        Nf       Bf        Y       SSN      SSB Escapement</a>
<a class="sourceLine" id="cb14-5" title="5"><span class="dv">1</span>    <span class="dv">0</span> <span class="fl">0.05285758</span> <span class="fl">12818.934</span> <span class="fl">3836.237</span> <span class="fl">200.0000</span> <span class="fl">12827.442</span> <span class="fl">3836.730</span>  <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="dv">2</span>    <span class="dv">1</span> <span class="fl">0.00000000</span>  <span class="fl">8592.788</span> <span class="fl">3520.003</span>   <span class="fl">0.0000</span>  <span class="fl">8597.499</span> <span class="fl">3520.731</span>  <span class="fl">0.9176385</span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="dv">3</span>    <span class="dv">2</span> <span class="fl">0.00000000</span>  <span class="fl">5759.918</span> <span class="fl">2889.236</span>   <span class="fl">0.0000</span>  <span class="fl">5763.076</span> <span class="fl">2890.174</span>  <span class="fl">0.7532910</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="dv">4</span>    <span class="dv">0</span> <span class="fl">0.05285758</span> <span class="fl">12818.934</span> <span class="fl">3836.237</span> <span class="fl">200.0000</span> <span class="fl">12827.442</span> <span class="fl">3836.730</span>  <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="dv">5</span>    <span class="dv">1</span> <span class="fl">0.14480670</span>  <span class="fl">7455.011</span> <span class="fl">3049.441</span> <span class="fl">498.8414</span>  <span class="fl">7460.579</span> <span class="fl">3050.675</span>  <span class="fl">0.7951238</span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="dv">6</span>    <span class="dv">2</span> <span class="fl">0.14480670</span>  <span class="fl">4323.562</span> <span class="fl">2166.496</span> <span class="fl">376.7007</span>  <span class="fl">4326.792</span> <span class="fl">2167.628</span>  <span class="fl">0.5649676</span></a>
<a class="sourceLine" id="cb14-11" title="11">  RelEscapement</a>
<a class="sourceLine" id="cb14-12" title="12"><span class="dv">1</span>     <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb14-13" title="13"><span class="dv">2</span>     <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb14-14" title="14"><span class="dv">3</span>     <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb14-15" title="15"><span class="dv">4</span>     <span class="fl">1.0000000</span></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="dv">5</span>     <span class="fl">0.8664891</span></a>
<a class="sourceLine" id="cb14-17" title="17"><span class="dv">6</span>     <span class="fl">0.7499992</span></a></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
